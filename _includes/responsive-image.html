{% capture srcset %}
{% for i in resized %}
    {% if i.width <= 1250 %}/{{ i.path }} {{ i.width }}w|{% endif %}
{% endfor %}
{% endcapture %}

{% capture webpsrcset %}
{% for i in resized %}
    {% assign path_noext = i.path | split: "." %}
    {% if i.width <= 1250 %}/{{ path_noext.first }}.webp {{ i.width }}w|{% endif %}
{% endfor %}
{% endcapture %}

{% assign smallest = resized | sort: 'width' | first %}
{% assign path_noext = path | split: "." %}

<picture>
  <source
    {% if original.width <= 1250 %}width="{{ original.width }}"{% endif %}
    type="image/webp"
    data-srcset="{{ webpsrcset | split: '|' | join: ', ' }}{% if original.width <= 1250 %} /{{ path_noext.first }}.webp {{ original.width }}w{% endif %}">
  <source
    {% if original.width <= 1250 %}width="{{ original.width }}"{% endif %}
    data-srcset="{{ srcset | split: '|' | join: ', ' }}{% if original.width <= 1250 %} /{{ path }} {{ original.width }}w{% endif %}">
  <img
    data-src="/{{ path }}"
    class="blur-up lazyautosizes lazyload"
    alt="{{ alt }}">
</picture>
